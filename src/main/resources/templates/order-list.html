<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>My Orders</title>
</head>
<body>
<h2>My Orders</h2>

<a href="/order/new">Place New Order</a>
<br/><br/>

<table border="1">
    <thead>
    <tr>
        <th>ID</th>
        <th>Service Type</th>
        <th>Status</th>
        <th>Order Date</th>
        <th>Delivery Slot</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="order : ${orders}">
        <td th:text="${order.id}"></td>
        <td th:text="${order.serviceType}"></td>
        <td th:text="${order.status}"></td>
        <td th:text="${#temporals.format(order.orderDate, 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="${order.deliverySlot != null ? order.deliverySlot : 'Not set'}"></td>
        <td>
            <!-- If order is awaiting client confirmation of clothes -->
            <a th:href="@{/order/{id}/confirm-clothes(id=${order.id})}"
               th:if="${order.status.name() == 'AWAITING_APPROVAL'}">Confirm Clothes</a>

            <!-- If order is READY, client can choose delivery slot -->
            <a th:href="@{/order/{id}/delivery-slot(id=${order.id})}"
               th:if="${order.status.name() == 'READY'}">Choose Delivery Slot</a>

            <!-- If order is READY and delivery slot is chosen, client can confirm delivery -->
            <form th:action="@{/order/{id}/confirm-delivery(id=${order.id})}" method="post"
                  th:if="${order.status.name() == 'READY' and order.deliverySlot != null}">
                <button type="submit">Confirm Delivery</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

<br/>
<a href="/client/dashboard">client Home page </a>


</body>
<style>
    body {
        font-family: 'Segoe UI', Arial, sans-serif;
        background: #f6f8fa;
        margin: 0;
        padding: 0;
    }

    h2 {
        text-align: center;
        color: #2d3a4b;
        margin-top: 40px;
        margin-bottom: 24px;
    }

    a[href="/order/new"] {
        display: block;
        width: fit-content;
        margin: 0 auto 18px auto;
        background: #2563eb;
        color: #fff;
        padding: 10px 22px;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 600;
        transition: background 0.2s;
        box-shadow: 0 2px 8px rgba(37,99,235,0.08);
    }

    a[href="/order/new"]:hover {
        background: #1746a2;
    }

    table {
        width: 95%;
        max-width: 900px;
        margin: 0 auto 32px auto;
        border-collapse: collapse;
        background: #fff;
        box-shadow: 0 2px 12px rgba(44,62,80,0.07);
        border-radius: 10px;
        overflow: hidden;
    }

    th, td {
        padding: 14px 10px;
        text-align: center;
    }

    th {
        background: #2563eb;
        color: #fff;
        font-weight: 600;
        font-size: 1.05rem;
        letter-spacing: 0.02em;
    }

    tr:nth-child(even) {
        background: #f1f5f9;
    }

    tr:nth-child(odd) {
        background: #fff;
    }

    td {
        font-size: 1rem;
        color: #2d3a4b;
    }

    td a, td form button {
        display: inline-block;
        margin: 2px 0;
        padding: 7px 16px;
        border-radius: 5px;
        border: none;
        background: #4f8cff;
        color: #fff;
        font-weight: 500;
        text-decoration: none;
        cursor: pointer;
        transition: background 0.18s;
        font-size: 0.98rem;
    }

    td a:hover, td form button:hover {
        background: #2563eb;
    }

    td form {
        display: inline;
    }

    @media (max-width: 700px) {
        table, thead, tbody, th, td, tr {
            display: block;
        }
        table {
            width: 99vw;
            margin: 0 -2vw 32px -2vw;
            border-radius: 0;
            box-shadow: none;
        }
        thead {
            display: none;
        }
        tr {
            margin-bottom: 18px;
            background: #fff !important;
            border-radius: 8px;
            box-shadow: 0 1px 6px rgba(44,62,80,0.07);
            padding: 10px 0;
        }
        td {
            text-align: left;
            padding: 10px 18px;
            position: relative;
            font-size: 1rem;
        }
        td:before {
            content: attr(data-label);
            font-weight: 600;
            color: #2563eb;
            display: block;
            margin-bottom: 4px;
            font-size: 0.97rem;
        }
    }
</style>
<script>
    // Add data-labels for responsive table
    document.addEventListener("DOMContentLoaded", function() {
        if(window.innerWidth <= 700) {
            const headers = Array.from(document.querySelectorAll("table thead th")).map(th => th.textContent);
            document.querySelectorAll("table tbody tr").forEach(tr => {
                tr.querySelectorAll("td").forEach((td, i) => {
                    td.setAttribute("data-label", headers[i]);
                });
            });
        }
    });
</script>
</html>